/* ==========================
   BASE
========================== */
body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: #f2f2f2;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
    transition: background 0.3s, color 0.3s;
}

body.dark {
    background: #4e4e4e;
    color: white;
}

/* ==========================
   HEADER
========================== */
header {
    width: 100%;
    padding: 12px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #ffffff;
    box-sizing: border-box;
    z-index: 10;
}

body.dark header { background: #000000; }

#theme-toggle, #lang-toggle {
    padding: 10px;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    font-size: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    min-height: 40px;
}

#theme-toggle { background: #333; color: white; }
body.dark #theme-toggle { background: #fff; color: #000; }

#lang-toggle { background: #333; color: #fff; font-weight: bold; }
body.dark #lang-toggle { background: #fff; color: #000; }

#add-task-btn {
    padding: 10px 16px;
    background: #ffd43b;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
    transition: .2s;
}
#add-task-btn:hover { transform: scale(1.02); }

/* ==========================
   BOARD
========================== */
.board {
    display: flex;
    flex: 1;
    gap: 15px;
    padding: 10px;
    height: calc(100vh - 70px);
    box-sizing: border-box;
}

.column {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    border-radius: 8px;
    transition: transform 0.2s;
}
.column:active { transform: scale(0.98); }
.col-title { font-weight: bold; margin-bottom: 10px; cursor: pointer; }

/* Column colors */
#todo-column { background: #fff9d6; }
#doing-column { background: #d9ecff; }
#done-column { background: #d8ffd9; }

body.dark .column { background: #111 !important; color: #eee; }
body.dark #todo-column { border: 2px solid #c9b200; }
body.dark #doing-column { border: 2px solid #0d6abf; }
body.dark #done-column { border: 2px solid #0f8a17; }

/* ==========================
   CARDS
========================== */
.card {
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 6px;
    cursor: grab;
    user-select: none;
    transition: transform 0.2s ease, background 0.3s, max-height 0.3s ease;
    position: relative;
    color: #333;
}

.card-header { cursor: pointer; position: relative; padding-right: 28px; }
.toggle-icon { position: absolute; top: 4px; right: 4px; font-size: 14px; opacity: 0.7; cursor: pointer; transition: transform 0.3s; }

.extra { max-height: 0; overflow: hidden; transition: max-height 0.35s ease; }
.card.expanded .extra { max-height: 200px; }
.card.expanded .toggle-icon { transform: rotate(180deg); }

.todo-card { background: #ffef9a; }
.doing-card { background: #a8d2ff; }
.done-card { background: #92f59a; }

body.dark .todo-card { background: #e6d889; }
body.dark .doing-card { background: #89b8e6; }
body.dark .done-card { background: #7ed97d; }

.warning { background: #ffc48a !important; }
.danger { background: #ff8a8a !important; }

.progress-bar { height: 6px; background: rgba(0,0,0,0.20); border-radius: 4px; margin-top: 5px; overflow: hidden; }
.progress-fill { height: 100%; width: 0%; background: #4caf50; transition: width 0.5s; }

.card button { width: 100%; padding: 6px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; color: white; margin-top: 6px; }
.edit-btn { background: #008cff; }
.delete-btn { background: #ff4d4a; }
.start-btn { background: #ff9800; }
.finish-btn { background: #43a047; }

/* ==========================
   MODAL
========================== */
.modal { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); display:none; align-items:center; justify-content:center; }
.modal-content { background: #ffffff; color: black; padding:25px; width:320px; border-radius:10px; display:flex; flex-direction:column; gap:12px; }
body.dark .modal-content { background:#333; color:white; }

.modal input, .modal button, .modal label { width:100%; font-size:15px; }
.modal input { padding:10px; border-radius:6px; border:1px solid #ccc; }
.modal button { padding:10px; border:none; border-radius:6px; cursor:pointer; transition:0.2s; }
.modal button:hover { transform: scale(1.02); }

#save-task-btn { background:#4caf50; color:white; }
#cancel-task-btn { background:#e53935; color:white; }

/* ==========================
   MOBILE
========================== */
@media (max-width:768px){
  body{overflow:auto;}
  .board{flex-direction:column; height:auto; overflow:visible; align-items:center;}
  .column{width:90%; height:auto;}

  /* CORREÇÃO: manter cards sempre em coluna */
  .column.fullscreen {
      position:fixed;
      top:70px;
      left:0;
      width:100vw !important;
      height:calc(100vh - 70px) !important;
      background:inherit;
      z-index:999;
      overflow-y:auto;

      display:flex !important;
      flex-direction:column !important;
  }

  .fullscreen .col-title{
      font-size:1.6rem;
      text-align:center;
      padding:12px;
      background: rgba(0,0,0,0.15);
      border-radius:6px;
  }
}